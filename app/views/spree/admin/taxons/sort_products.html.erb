<%= render :partial => 'spree/admin/shared/configuration_menu' %>

<% content_for :page_title do %>
  <%= t(:sort_taxon_products) %> "<%= @taxon.name %>"
<% end %>

<%= t(:sort_products_hint_message) %>

<div id="ajax_error" class="errorExplanation" style="display:none;"></div>
<% content_for :page_actions do %>
  <% # Because otherwise the form would attempt to use to_param of @taxon %>
  <% form_url = update_products_admin_taxonomy_taxon_path(@taxonomy.id, @taxon.id) %>
  <%= form_for [:update_products, :admin, @taxonomy, @taxon], :method => :post, :url => form_url do |f| %>
    <%= hidden_field_tag :taxon_id, @taxon_id %>
    <%= hidden_field_tag :product_positions, 0 %>

      <li id="save_order">
        <%= button_link_to t(:back_to_taxonomies_list), spree.admin_taxonomies_path, :icon => 'icon-arrow-left' %>
      </li>
  <% end %>
<% end %>

<ul id="products" class="thumbnails">
  <% @products.each do |product| %>
    <%= content_tag_for :li, product, :class=> "two columns", :style => 'width: 125px; height: 200px; list-style-type: none' do %>
      <div class="columns thumbnail" style = "width: 130px; cursor: pointer;" value="<%= product.id %>">
          <%= small_image(product, :width => "140", :id=>"image-map") %>
          <div class="caption">
            <% product_name = product.name.split(" ") %>
            <% product_name.delete(product_name.last) %>
            <div><%= product_name.join(" ") %></div>
          </div>
      </div>
    <% end %>
  <% end %>
</ul>

<%= javascript_include_tag 'admin/sort_products' %>
